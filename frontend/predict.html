<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disease Prediction | Synapse</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<style>
  body {
    background: linear-gradient(135deg, #667eea, #764ba2);
  }
  .glass {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.25);
  }
</style>
</head>

<body class="min-h-screen flex items-center justify-center px-4">

<div class="glass max-w-xl w-full rounded-3xl shadow-2xl p-10 text-white">

  <!-- Header -->
  <div class="text-center mb-8">
    <div class="text-5xl mb-3">ðŸ§¬</div>
    <h1 class="text-3xl font-extrabold">AI Disease Prediction</h1>
    <p class="text-white/80 mt-2">
      Enter your symptoms to get AI-powered diagnosis
    </p>
  </div>

  <!-- Input -->
  <div class="mb-6">
    <label class="block mb-2 font-semibold text-white/90">
      Symptoms <span class="text-sm text-white/60">(comma separated)</span>
    </label>
    <input
      id="symptomsInput"
      type="text"
      placeholder="itching, skin_rash, fatigue"
      class="w-full p-4 rounded-xl bg-white/90 text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-purple-300"
    />
  </div>

  <!-- Button -->
  <button
    onclick="predictDisease()"
    class="w-full bg-gradient-to-r from-purple-600 to-blue-600 py-4 rounded-xl font-bold text-lg hover:scale-[1.02] transition shadow-lg">
    Predict Disease
  </button>

  <!-- Loader -->
  <div id="loader" class="hidden mt-6 text-center">
    <div class="animate-spin rounded-full h-10 w-10 border-t-4 border-white mx-auto"></div>
    <p class="mt-3 text-white/80">Analyzing symptoms...</p>
  </div>

  <!-- Output -->
  <div id="output" class="hidden mt-8 bg-white/90 text-gray-800 rounded-2xl p-6">
    <h2 class="text-xl font-bold mb-2">Prediction Result</h2>
    <p id="diseaseText" class="text-lg font-semibold text-purple-700"></p>
  </div>

</div>

<script>
async function predictDisease() {
  const input = document.getElementById("symptomsInput").value.trim();
  const loader = document.getElementById("loader");
  const output = document.getElementById("output");
  const diseaseText = document.getElementById("diseaseText");

  if (!input) {
    diseaseText.innerText = "Please enter at least one symptom.";
    output.classList.remove("hidden");
    return;
  }

  const symptoms = input.split(",").map(s => s.trim());

  loader.classList.remove("hidden");
  output.classList.add("hidden");

  try {
    const res = await fetch("http://127.0.0.1:8000/predict/symptom", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ symptoms })
    });

    const data = await res.json();

    diseaseText.innerHTML = `
      ðŸ©º Predicted Disease:
      <span class="block text-2xl mt-1">${data.predicted_disease}</span>
    `;

    output.classList.remove("hidden");

  } catch (err) {
    diseaseText.innerText = "Server error. Please try again.";
    output.classList.remove("hidden");
    console.error(err);
  } finally {
    loader.classList.add("hidden");
  }
}
</script>

</body>
</html>
