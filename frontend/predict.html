<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Disease Prediction | Synapse</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<style>
  html {
    scroll-behavior: smooth;
  }

  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
  }

  .fade-up {
    animation: fadeUp 1s ease forwards;
    opacity: 0;
  }

  .float {
    animation: float 6s ease-in-out infinite;
  }

  .glass {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .gradient-text {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .animated-gradient {
    background: linear-gradient(270deg, #667eea, #764ba2, #f093fb, #4facfe);
    background-size: 800% 800%;
    animation: gradient 15s ease infinite;
  }

  .card-hover {
    transition: all 0.3s ease;
  }

  .card-hover:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  }

  .shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    background-size: 1000px 100%;
    animation: shimmer 2s infinite;
  }
</style>
</head>

<body class="animated-gradient text-gray-800 overflow-x-hidden">

<div class="glass rounded-3xl shadow-2xl max-w-4xl w-full p-10 mx-auto mt-20">

  <!-- HEADER -->
  <div class="text-center mb-10">
    <h1 class="text-5xl font-black text-purple-700">
      üß¨ AI Disease Predictor
    </h1>
    <p class="text-gray-600 mt-3 text-lg">
      Smart symptom analysis powered by Machine Learning
    </p>
  </div>

  <!-- INPUT CARD -->
  <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
<label class="block font-semibold text-gray-800 text-lg mb-2">
      Enter Symptoms
    </label>

    <input
  id="symptomsInput"
  type="text"
  placeholder="itching, fatigue, headache"
  class="w-full p-4 text-lg border border-purple-200 rounded-xl
         focus:outline-none focus:ring-2 focus:ring-purple-500"
/>


    <button
      onclick="predictDisease()"
      class="mt-5 w-full bg-gradient-to-r from-purple-600 to-blue-600
             text-white py-3 rounded-xl font-bold text-lg
             hover:scale-105 transition"
    >
      üîç Analyze Symptoms
    </button>
  </div>

  <!-- LOADING -->
  <div id="loading" class="hidden text-center text-purple-700 font-semibold">
    ‚è≥ Analyzing medical data...
  </div>

  <!-- RESULT -->
  <div id="resultBox" class="hidden space-y-6">

    <!-- Disease Card -->
    <div class="bg-gradient-to-r from-purple-600 to-indigo-600
                text-white rounded-2xl p-6 shadow-xl">
      <h2 class="text-2xl font-bold">
        ü©∫ Predicted Disease
      </h2>
<p id="disease"
   class="text-4xl font-extrabold mt-2 tracking-wide">
</p>
    </div>

    <!-- Info Grid -->
    <div class="grid md:grid-cols-2 gap-6">

      <!-- Description -->
      <div class="bg-white rounded-2xl p-6 shadow">
        <h3 class="font-bold text-purple-700 text-2xl mb-3">üìñ Description</h3>
        <p id="description"
   class="text-gray-600 text-lg leading-relaxed font-medium">
</p>

      </div>

      <!-- Risk -->
      <div class="bg-white rounded-2xl p-6 shadow">
        <h3 class="font-bold text-purple-700 text-2xl mb-3">‚ö†Ô∏è Risk Assessment</h3>

        <p>
          <span class="font-semibold">Risk Level:</span>
          <span id="risk" class="font-bold ml-2"></span>
        </p>

        <div class="mt-4">
          <p class="font-semibold text-2xl mb-3">Severity Score</p>
          <div class="w-full bg-gray-200 rounded-full h-3">
            <div id="severityBar"
                 class="h-3 rounded-full bg-purple-600"
                 style="width: 0%"></div>
          </div>
        </div>
      </div>

    </div>

    <!-- Precautions -->
    <div class="bg-white rounded-2xl p-6 shadow">
      <h3 class="font-bold text-purple-700 text-2xl mb-3">üõ°Ô∏è Precautions</h3>
<ul id="precautions"
    class="list-disc ml-6 text-gray-600 text-lg space-y-2 font-medium">
</ul>
    </div>

  </div>

</div>

<script>
async function predictDisease() {

  const input = document.getElementById("symptomsInput").value;
  const symptoms = input.split(",").map(s => s.trim().toLowerCase()).filter(Boolean);

  if (symptoms.length === 0) {
    alert("Please enter at least one symptom");
    return;
  }

  document.getElementById("loading").classList.remove("hidden");

  const res = await fetch("/predict/symptom", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ symptoms })
  });

  const data = await res.json();

  document.getElementById("loading").classList.add("hidden");
  document.getElementById("resultBox").classList.remove("hidden");

  // Fill data
  document.getElementById("disease").innerText = data.predicted_disease;
  document.getElementById("description").innerText = data.description;

  // Risk styling
  const riskEl = document.getElementById("risk");
  riskEl.innerText = data.risk_level;
  riskEl.className =
    data.risk_level === "Low" ? "text-green-600 font-bold" :
    data.risk_level === "Medium" ? "text-yellow-600 font-bold" :
    "text-red-600 font-bold";

  // Severity bar
  const severityPercent = Math.min(data.severity_score * 5, 100);
  document.getElementById("severityBar").style.width = severityPercent + "%";

  // Precautions
  const ul = document.getElementById("precautions");
  ul.innerHTML = "";
  data.precautions.forEach(p => {
    ul.innerHTML += `<li>${p}</li>`;
  });
}
</script>

</body>
</html>
